---
import SiteSVG from "@/components/SiteSVG.astro";
import SiteFooter from "@/components/SiteFooter.astro";
import SiteHead from "@/components/SiteHead.astro";
import SiteHeader from "@/components/SiteHeader.astro";

const {
    bodyClass,
    title,
    description,
    image
} = Astro.props;
---
<html lang="en">
    <head>
		<script is:inline>
			(function () {
				const prefersDark = window.matchMedia('(prefers-color-scheme: dark)')
				const currentTheme = localStorage.getItem('theme');

				if (currentTheme) {
					document.documentElement.setAttribute('data-theme', currentTheme);
				} else if (prefersDark.matches) {
					document.documentElement.setAttribute('data-theme', 'dark');
				} else {
					document.documentElement.setAttribute('data-theme', 'light');
				}
			})();
		</script>
        <SiteHead
            title={title}
            description={description}
            image={image}
        />
    </head>
    <body class={bodyClass} data-swup-scroll-container>
        <SiteSVG />
        <SiteHeader />
        <main id="main" class="site-main">
            <div id="swup" class="site-main__content transition transition--page">
                <slot />
            </div>
        </main>
        <SiteFooter />
        <script>
            import '@/assets/js/index.js';
        </script>
    </body>
</html>
